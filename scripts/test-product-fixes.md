# 产品管理模块修复测试指南

## 测试前准备

### 1. 启动开发服务器
```bash
npm run dev
```

### 2. 打开浏览器
访问: http://localhost:3001

### 3. 登录系统
使用测试账号登录

---

## 测试用例

### 测试用例 1: 产品列表分页功能

#### 测试步骤
1. 访问产品列表页面: http://localhost:3001/products
2. 观察页面底部是否显示分页组件
3. 检查分页信息是否正确显示（第X页，共Y页，总计Z条记录）
4. 点击"下一页"按钮
5. 验证页面跳转到第2页
6. 验证产品列表内容更新
7. 点击"上一页"按钮
8. 验证页面返回第1页

#### 预期结果
- ✅ 分页组件显示在表格底部
- ✅ 分页信息显示正确
- ✅ "上一页"按钮在第1页时禁用
- ✅ "下一页"按钮在最后一页时禁用
- ✅ 点击按钮后页面正常跳转
- ✅ 产品列表内容正确更新

#### 实际结果
- [ ] 通过
- [ ] 失败（原因：_____________）

---

### 测试用例 2: 新增产品显示

#### 测试步骤
1. 访问产品列表页面
2. 记录当前产品总数
3. 点击"新增产品"按钮
4. 填写产品信息：
   - 产品编码: TEST-001
   - 产品名称: 测试产品
   - 单位: 件
   - 状态: 启用
5. 点击"保存"按钮
6. 返回产品列表页面
7. 验证新产品是否显示在列表顶部
8. 验证产品总数是否增加1

#### 预期结果
- ✅ 产品创建成功
- ✅ 新产品显示在列表顶部
- ✅ 产品总数增加1
- ✅ 产品信息显示正确

#### 实际结果
- [ ] 通过
- [ ] 失败（原因：_____________）

---

### 测试用例 3: 不同状态产品显示

#### 测试步骤
1. 创建一个状态为"启用"的产品
2. 创建一个状态为"停用"的产品
3. 返回产品列表页面
4. 验证两个产品都显示在列表中
5. 使用状态筛选器选择"启用"
6. 验证只显示启用状态的产品
7. 使用状态筛选器选择"停用"
8. 验证只显示停用状态的产品
9. 使用状态筛选器选择"全部"
10. 验证显示所有产品

#### 预期结果
- ✅ 默认显示所有状态的产品
- ✅ 状态筛选功能正常
- ✅ 筛选后产品列表正确更新

#### 实际结果
- [ ] 通过
- [ ] 失败（原因：_____________）

---

### 测试用例 4: 产品创建表单验证

#### 测试步骤
1. 访问产品创建页面: http://localhost:3001/products/new
2. 检查表单中是否包含以下字段：
   - [ ] 产品编码
   - [ ] 产品名称
   - [ ] 规格描述
   - [ ] 产品描述
   - [ ] 计量单位
   - [ ] 厚度
   - [ ] 状态
   - [ ] 分类
   - [ ] 缩略图
   - [ ] 产品图片
3. 确认表单中**不包含**以下字段：
   - [ ] 每件片数 (piecesPerUnit)
   - [ ] 重量 (weight)

#### 预期结果
- ✅ 表单包含所有必要字段
- ✅ 表单不包含"每件片数"字段
- ✅ 表单不包含"重量"字段

#### 实际结果
- [ ] 通过
- [ ] 失败（原因：_____________）

---

### 测试用例 5: 图片上传功能

#### 测试步骤
1. 访问产品创建页面
2. 准备一张测试图片（小于5MB，格式为 JPG/PNG）
3. 点击"上传缩略图"按钮
4. 选择测试图片
5. 观察上传进度
6. 验证图片上传成功
7. 验证图片预览显示正确
8. 尝试上传主图
9. 验证主图上传成功
10. 尝试上传效果图
11. 验证效果图上传成功

#### 预期结果
- ✅ 图片上传成功
- ✅ 上传进度显示正常
- ✅ 图片预览显示正确
- ✅ 支持多张图片上传

#### 实际结果
- [ ] 通过
- [ ] 失败（原因：_____________）

#### 如果失败，请检查：
1. 打开浏览器开发者工具 (F12)
2. 切换到 Network 标签
3. 重新尝试上传
4. 查看 `/api/upload` 请求
5. 记录以下信息：
   - 请求状态码: _______
   - 错误信息: _______
   - 请求参数: _______
   - 响应内容: _______

---

### 测试用例 6: 分页与筛选组合

#### 测试步骤
1. 确保产品总数超过20条（默认每页显示20条）
2. 访问产品列表页面
3. 使用搜索功能搜索"测试"
4. 验证搜索结果显示正确
5. 如果搜索结果超过20条，验证分页组件显示
6. 切换到第2页
7. 验证搜索条件保持不变
8. 清空搜索条件
9. 使用分类筛选
10. 验证分页功能正常

#### 预期结果
- ✅ 搜索和分页可以组合使用
- ✅ 切换页面时筛选条件保持
- ✅ 分页信息根据筛选结果更新

#### 实际结果
- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 性能测试

### 测试用例 7: 页面加载性能

#### 测试步骤
1. 打开浏览器开发者工具
2. 切换到 Network 标签
3. 清空缓存
4. 访问产品列表页面
5. 记录页面加载时间
6. 切换到第2页
7. 记录页面切换时间

#### 预期结果
- ✅ 首次加载时间 < 2秒
- ✅ 分页切换时间 < 1秒
- ✅ 无明显卡顿

#### 实际结果
- 首次加载时间: _______ 秒
- 分页切换时间: _______ 秒
- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 兼容性测试

### 测试用例 8: 浏览器兼容性

#### 测试步骤
在以下浏览器中重复测试用例 1-6：
- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (最新版本)
- [ ] Edge (最新版本)

#### 预期结果
- ✅ 所有浏览器功能正常
- ✅ 样式显示一致

#### 实际结果
- Chrome: [ ] 通过 [ ] 失败
- Firefox: [ ] 通过 [ ] 失败
- Safari: [ ] 通过 [ ] 失败
- Edge: [ ] 通过 [ ] 失败

---

## 测试总结

### 测试环境
- 操作系统: _____________
- Node.js 版本: _____________
- 浏览器版本: _____________
- 测试日期: _____________

### 测试结果统计
- 总测试用例数: 8
- 通过数: _______
- 失败数: _______
- 通过率: _______%

### 发现的问题
1. _____________
2. _____________
3. _____________

### 建议
1. _____________
2. _____________
3. _____________

---

## 附录：常见问题排查

### 问题 1: 分页组件不显示
**可能原因**:
- 产品总数少于每页显示数量
- 组件导入错误
- 样式问题

**排查步骤**:
1. 检查产品总数
2. 查看浏览器控制台错误
3. 检查组件导入路径

### 问题 2: 新增产品不显示
**可能原因**:
- 缓存未清理
- 状态筛选问题
- 排序问题

**排查步骤**:
1. 刷新页面
2. 清空筛选条件
3. 检查产品状态

### 问题 3: 图片上传失败
**可能原因**:
- 文件大小超限
- 文件类型不支持
- 七牛云配置错误
- 网络问题

**排查步骤**:
1. 检查文件大小（应小于10MB）
2. 检查文件格式（应为 JPG/PNG/WebP/GIF）
3. 查看浏览器控制台错误
4. 检查服务器日志
5. 验证七牛云配置

---

## 测试完成后

### 1. 提交测试报告
将测试结果整理成文档，提交给开发团队

### 2. 记录问题
将发现的问题记录到问题跟踪系统

### 3. 验证修复
对于发现的问题，在修复后重新测试

---

**测试人员**: _____________
**测试日期**: _____________
**签名**: _____________

