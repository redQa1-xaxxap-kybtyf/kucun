# åº“å­˜ç®¡ç†ç³»ç»Ÿ - å¼€å‘å¿«é€Ÿå‚è€ƒå¡

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### é¡¹ç›®å¯åŠ¨
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®åœ°å€
http://localhost:3000
```

### æ•°æ®åº“æ“ä½œ
```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
npx prisma generate

# æ¨é€æ¶æ„åˆ°æ•°æ®åº“ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
npx prisma db push

# åˆ›å»ºè¿ç§»æ–‡ä»¶ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
npx prisma migrate dev

# æŸ¥çœ‹æ•°æ®åº“
npx prisma studio
```

## ğŸ“ é¡¹ç›®ç»“æ„é€ŸæŸ¥

### æ ¸å¿ƒç›®å½•
```
app/
â”œâ”€â”€ (dashboard)/           # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”œâ”€â”€ products/         # äº§å“ç®¡ç†
â”‚   â”œâ”€â”€ categories/       # åˆ†ç±»ç®¡ç†
â”‚   â”œâ”€â”€ customers/        # å®¢æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ inventory/        # åº“å­˜ç®¡ç†
â”‚   â””â”€â”€ sales/           # é”€å”®ç®¡ç†
â”œâ”€â”€ api/                 # API è·¯ç”±
â””â”€â”€ auth/               # è®¤è¯é¡µé¢

components/
â”œâ”€â”€ ui/                 # shadcn/ui ç»„ä»¶ï¼ˆä¸å¯ä¿®æ”¹ï¼‰
â””â”€â”€ common/            # ä¸šåŠ¡ç»„ä»¶

lib/
â”œâ”€â”€ auth.ts            # è®¤è¯é…ç½®
â”œâ”€â”€ db.ts              # Prisma å®¢æˆ·ç«¯
â”œâ”€â”€ env.ts             # ç¯å¢ƒå˜é‡éªŒè¯
â”œâ”€â”€ api/               # API å®¢æˆ·ç«¯å‡½æ•°
â””â”€â”€ validations/       # Zod éªŒè¯è§„åˆ™
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### ä»£ç è´¨é‡
```bash
# ESLint æ£€æŸ¥
npm run lint

# è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
npm run lint:fix

# Prettier æ ¼å¼åŒ–
npm run format

# TypeScript ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»ºé¡¹ç›®
npm run build
```

### shadcn/ui ç»„ä»¶
```bash
# æ·»åŠ æ–°ç»„ä»¶
npx shadcn-ui@latest add button
npx shadcn-ui@latest add form
npx shadcn-ui@latest add dialog

# æŸ¥çœ‹å¯ç”¨ç»„ä»¶
npx shadcn-ui@latest add
```

### Git æ“ä½œ
```bash
# æäº¤ä»£ç ï¼ˆä¼šè§¦å‘è´¨é‡æ£€æŸ¥ï¼‰
git add .
git commit -m "feat(äº§å“): æ·»åŠ æ‰¹é‡åˆ é™¤åŠŸèƒ½"

# è·³è¿‡è´¨é‡æ£€æŸ¥ï¼ˆç´§æ€¥æƒ…å†µï¼‰
git commit -m "fix: ç´§æ€¥ä¿®å¤" --no-verify
```

## ğŸ¯ å¼€å‘æ¨¡å¼

### 1. æ–°å¢åŠŸèƒ½å¼€å‘æµç¨‹

#### æ­¥éª¤1: æ•°æ®åº“è®¾è®¡
```prisma
// prisma/schema.prisma
model Product {
  id          String   @id @default(cuid())
  name        String
  price       Decimal
  category_id String
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
  
  category    Category @relation(fields: [category_id], references: [id])
  
  @@map("products")
}
```

#### æ­¥éª¤2: éªŒè¯è§„åˆ™å®šä¹‰
```typescript
// lib/validations/product.ts
export const productValidations = {
  create: z.object({
    name: z.string().min(1, 'äº§å“åç§°ä¸èƒ½ä¸ºç©º'),
    price: z.number().min(0, 'ä»·æ ¼ä¸èƒ½ä¸ºè´Ÿæ•°'),
    categoryId: z.string().min(1, 'åˆ†ç±»ä¸èƒ½ä¸ºç©º'),
  }),
};

export type ProductCreateInput = z.infer<typeof productValidations.create>;
```

#### æ­¥éª¤3: API è·¯ç”±å®ç°
```typescript
// app/api/products/route.ts
export async function POST(request: NextRequest) {
  try {
    // 1. èº«ä»½éªŒè¯
    const session = await getServerSession(authOptions);
    if (!session) {
      return NextResponse.json({ error: 'æœªæˆæƒ' }, { status: 401 });
    }

    // 2. è¾“å…¥éªŒè¯
    const body = await request.json();
    const validatedData = productValidations.create.parse(body);

    // 3. ä¸šåŠ¡é€»è¾‘
    const product = await prisma.product.create({
      data: {
        name: validatedData.name,
        price: validatedData.price,
        category_id: validatedData.categoryId,
      },
    });

    // 4. å“åº”
    return NextResponse.json({ success: true, data: product });
  } catch (error) {
    if (error instanceof z.ZodError) {
      return NextResponse.json({ error: 'è¾“å…¥æ•°æ®æ— æ•ˆ' }, { status: 400 });
    }
    return NextResponse.json({ error: 'æœåŠ¡å™¨é”™è¯¯' }, { status: 500 });
  }
}
```

#### æ­¥éª¤4: API å®¢æˆ·ç«¯å‡½æ•°
```typescript
// lib/api/products.ts
export async function createProduct(data: ProductCreateInput) {
  const response = await fetch('/api/products', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data),
  });
  
  if (!response.ok) {
    throw new Error('åˆ›å»ºäº§å“å¤±è´¥');
  }
  
  return response.json();
}
```

#### æ­¥éª¤5: å‰ç«¯ç»„ä»¶å®ç°
```tsx
// app/(dashboard)/products/create-product-form.tsx
export function CreateProductForm() {
  const form = useForm<ProductCreateInput>({
    resolver: zodResolver(productValidations.create),
  });

  const createMutation = useMutation({
    mutationFn: createProduct,
    onSuccess: () => {
      toast({ title: 'äº§å“åˆ›å»ºæˆåŠŸ' });
      queryClient.invalidateQueries({ queryKey: ['products'] });
    },
  });

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(createMutation.mutate)}>
        <FormField
          control={form.control}
          name="name"
          render={({ field }) => (
            <FormItem>
              <FormLabel>äº§å“åç§°</FormLabel>
              <FormControl>
                <Input {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit" disabled={createMutation.isPending}>
          {createMutation.isPending ? 'åˆ›å»ºä¸­...' : 'åˆ›å»ºäº§å“'}
        </Button>
      </form>
    </Form>
  );
}
```

### 2. é¡µé¢å¼€å‘æ¨¡å¼

#### æœåŠ¡å™¨ç»„ä»¶ï¼ˆæ•°æ®è·å–ï¼‰
```tsx
// app/(dashboard)/products/page.tsx
export default async function ProductsPage() {
  const products = await prisma.product.findMany({
    include: { category: true },
    orderBy: { created_at: 'desc' },
  });

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h1 className="text-3xl font-bold">äº§å“ç®¡ç†</h1>
        <CreateProductButton />
      </div>
      <ProductList products={products} />
    </div>
  );
}
```

#### å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆäº¤äº’åŠŸèƒ½ï¼‰
```tsx
// components/product-list.tsx
'use client';

export function ProductList({ products }: { products: Product[] }) {
  const [selectedIds, setSelectedIds] = useState<string[]>([]);
  
  const deleteProductsMutation = useMutation({
    mutationFn: batchDeleteProducts,
    onSuccess: () => {
      toast({ title: 'åˆ é™¤æˆåŠŸ' });
      queryClient.invalidateQueries({ queryKey: ['products'] });
    },
  });

  return (
    <div className="space-y-4">
      {selectedIds.length > 0 && (
        <Button 
          variant="destructive"
          onClick={() => deleteProductsMutation.mutate({ productIds: selectedIds })}
        >
          æ‰¹é‡åˆ é™¤ ({selectedIds.length})
        </Button>
      )}
      
      <div className="grid gap-4">
        {products.map((product) => (
          <ProductCard 
            key={product.id} 
            product={product}
            selected={selectedIds.includes(product.id)}
            onSelect={(selected) => {
              if (selected) {
                setSelectedIds([...selectedIds, product.id]);
              } else {
                setSelectedIds(selectedIds.filter(id => id !== product.id));
              }
            }}
          />
        ))}
      </div>
    </div>
  );
}
```

## ğŸ¨ UI ç»„ä»¶é€ŸæŸ¥

### å¸¸ç”¨ç»„ä»¶å¯¼å…¥
```tsx
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';
import { Form, FormControl, FormField, FormItem, FormLabel } from '@/components/ui/form';
import { useToast } from '@/components/ui/use-toast';
```

### è¡¨å•æ¨¡å¼
```tsx
const form = useForm<FormData>({
  resolver: zodResolver(validationSchema),
  defaultValues: { /* é»˜è®¤å€¼ */ },
});

<Form {...form}>
  <form onSubmit={form.handleSubmit(onSubmit)}>
    <FormField
      control={form.control}
      name="fieldName"
      render={({ field }) => (
        <FormItem>
          <FormLabel>å­—æ®µæ ‡ç­¾</FormLabel>
          <FormControl>
            <Input {...field} />
          </FormControl>
          <FormMessage />
        </FormItem>
      )}
    />
  </form>
</Form>
```

### å¯¹è¯æ¡†æ¨¡å¼
```tsx
const [open, setOpen] = useState(false);

<Dialog open={open} onOpenChange={setOpen}>
  <DialogTrigger asChild>
    <Button>æ‰“å¼€å¯¹è¯æ¡†</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>å¯¹è¯æ¡†æ ‡é¢˜</DialogTitle>
    </DialogHeader>
    {/* å¯¹è¯æ¡†å†…å®¹ */}
  </DialogContent>
</Dialog>
```

## ğŸ” è°ƒè¯•æŠ€å·§

### æ•°æ®åº“æŸ¥è¯¢è°ƒè¯•
```typescript
// å¯ç”¨ Prisma æŸ¥è¯¢æ—¥å¿—
const prisma = new PrismaClient({
  log: ['query', 'info', 'warn', 'error'],
});
```

### API è°ƒè¯•
```typescript
// åœ¨ API è·¯ç”±ä¸­æ·»åŠ æ—¥å¿—
console.log('Request body:', body);
console.log('Validated data:', validatedData);
console.log('Database result:', result);
```

### å‰ç«¯çŠ¶æ€è°ƒè¯•
```tsx
// React Query DevTools
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';

<ReactQueryDevtools initialIsOpen={false} />
```

## ğŸ“ æäº¤ä¿¡æ¯æ¨¡æ¿

```
feat(æ¨¡å—): æ·»åŠ æ–°åŠŸèƒ½çš„ç®€çŸ­æè¿°

è¯¦ç»†æè¿°åŠŸèƒ½çš„å®ç°å’Œå½±å“ï¼š
- æ·»åŠ äº†ä»€ä¹ˆåŠŸèƒ½
- è§£å†³äº†ä»€ä¹ˆé—®é¢˜
- æœ‰ä»€ä¹ˆæ³¨æ„äº‹é¡¹

ç›¸å…³é—®é¢˜: #123
```

### å¸¸ç”¨æäº¤ç±»å‹
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºå·¥å…·æˆ–ä¾èµ–æ›´æ–°

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### 1. Prisma è¿æ¥é—®é¢˜
```bash
# é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯
npx prisma generate

# é‡ç½®æ•°æ®åº“
npx prisma db push --force-reset
```

### 2. ESLint é”™è¯¯
```bash
# è‡ªåŠ¨ä¿®å¤
npm run lint:fix

# è·³è¿‡ç‰¹å®šè§„åˆ™
// eslint-disable-next-line @typescript-eslint/no-unused-vars
```

### 3. ç±»å‹é”™è¯¯
```typescript
// ä½¿ç”¨ç±»å‹æ–­è¨€ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
const data = response as ApiResponse;

// ä½¿ç”¨ç±»å‹å®ˆå«
function isUser(obj: any): obj is User {
  return obj && typeof obj.id === 'string';
}
```

---

**å¿«é€Ÿå‚è€ƒï¼Œé«˜æ•ˆå¼€å‘ï¼** âš¡
