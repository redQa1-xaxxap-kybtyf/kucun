---
type: 'always_apply'
---

数据定义：Prisma 为数据库结构，Zod 为接口契约；所有 API 入参/出参用同一份 Zod。

数据获取：优先在 Server（RSC/route handlers）完成；Client 只做交互与缓存（TanStack Query）。

Query Key 规范：['entity', id]、['list', filters]，集中定义于 lib/queryKeys.ts。

表单：统一使用 React Hook Form + ZodResolver 模板。

认证：只用 Next-Auth，服务端用 getServerSession()。

环境变量：统一从 env.mjs 导出，其他地方禁止直接读 process.env。

返回体统一：{ data, error }；错误信息走 error。

代码风格：ESLint + Prettier，提交前必须通过脚本。

版本与命令：使用 npm run dev/build/lint/typecheck/db:\*，禁止私造命令。
